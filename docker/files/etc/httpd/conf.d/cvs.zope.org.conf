<VirtualHost 10.198.1.20:80>
  ServerName cvs.zope.org

  <Directory "/usr/local/viewcvs-0.9.2/cgi/">
    Options ExecCGI
  </Directory>

  RewriteEngine On
  RewriteLogLevel 0

  RewriteRule ^/robots.txt - [l]
  RewriteRule ^/error/(.*) /var/www/error/$1 [l]

  # Extremely impolite spider (with a falsified Agent header)
  # Man, you ain't kidding noone with that user-agent...
  RewriteCond %{HTTP_USER_AGENT} ^User-Agent:\ Mozilla/4\.0
  RewriteRule .* - [F,l]

  # Shut down access from setuptools retarditude.
  RewriteCond %{HTTP_USER_AGENT} ^.*setuptools.*
  RewriteRule .* - [F,l]

  # Block search bot so viewcvs doesn't grind the machine under.
  RewriteCond %{HTTP_USER_AGENT} ^.*msnbot.*
  RewriteRule .* - [F,L]

  # Block another search bot so viewcvs doesn't grind the machine under.
  RewriteCond %{HTTP_USER_AGENT} ^.*AhrefsBot.*
  RewriteRule .* - [F,L]

  RewriteRule ^/icons - [l]
  RewriteRule ^/query(.*) /usr/local/viewcvs-0.9.2/cgi/query.cgi$1 [l,t=application/x-httpd-cgi]
  RewriteRule ^/cgi-bin/viewcvs.cgi/(.*) /$1 [r,l]
  RewriteRule ^/cgi-bin/viewcvs.cgi$ / [r,l]
  RewriteRule ^(.*) /usr/local/viewcvs-0.9.2/cgi/viewcvs.cgi$1 [l,t=application/x-httpd-cgi]
</VirtualHost>

